<html>

<head>
<title>ICO (Windows Icon) file format plugin for Photoshop</title>
<link rel=stylesheet href="http://www.telegraphics.com.au/readme.css" type="text/css">
</head>

<body>

<h2>ICO (Windows Icon) file format plugin for Photoshop</h2>

<p>
<i>Copyright 2002-2011 Toby Thain, <a href="mailto:toby@telegraphics.com.au">toby@telegraphics.com.au</a></i>

<p>The plugin gives Photoshop the ability to directly Open and Save
Windows icon (.ICO) and cursor (.CUR) files
(saving .CUR files is supported by version 2.1 or later).
<b><a href="http://www.telegraphics.com.au/sw/#icoformat">Download the latest version here.</a></b>

<h3>Tested with:</h3>

<ul>
<li><a href="http://www.adobe.com/products/photoshop/main.html">Photoshop</a> on Mac:
	<ul>
	<li>Photoshop CS5 on Intel Macintosh (32/64 bit)</li>
	<li>Photoshop CS3 &amp; CS4 on 32-bit Intel and PowerPC Macintosh</li>
	<li>Photoshop 3.0-7.0, CS, CS2 on PowerPC Macintosh (OS&nbsp;X, OS 9 and Classic)</li>
	<li>Photoshop 4.0 / MacOS 8.0 on 68K Macintosh</li>
	</ul>
</li>
<li>Windows: Photoshop 5.0 and any later version on Windows 98/NT, XP, Vista, and Windows 7</li>
<li><a href="http://www.corel.com/servlet/Satellite?pagename=Corel3/Products/Display&pid=1047025487586">Paint Shop Pro</a> 9 (may not work correctly with earlier versions due to PSP plugin compatibility issues)</li>
<li>Photoshop Elements (<a href="http://www.adobe.com/products/photoshopelmac/main.html">Mac</a> US$79.99/<a href="http://www.adobe.com/products/photoshopelwin/main.html">Win</a> US$89.99. Prices at time of writing)</li>
</ul>

<h3>Free software - donation suggested</h3>

<p>
This program is free software licensed under the terms of the <a href="http://www.gnu.org/copyleft/gpl.html">GNU General Public License</a>.
If you use this program and like it, please donate what you think it is worth (US$5 suggested):
</p>

<a href="http://www.lasthours.com/forum/2010/12/stop-internet-censorshipsupport-wikileaksboycott-paypal-now">
<img src="http://telegraphics.com.au/sw/ppgonedsmall.png" width="84" height="84" alt="PayPal can bite me. New donation options coming soon." border="0">
</a>

<p>
The program is fully supported. Please <a href="mailto:toby@telegraphics.com.au">contact the author</a> with any bug reports, suggestions or comments.

<h3>To install</h3>

<ol>
<li><b>64-bit Windows (Vista/Windows 7):</b></li>
	<ul>
	<li>Restart before installing;</li>
	<li>put plugin in <tt>C:\Program Files\Adobe\Photoshop <version>\Plug-Ins\File Formats</tt>.</li>
	<li>If you are running on a 64-bit Windows system and are launching
		the 64-bit version of Photoshop CS4 or CS5,
	    <em>download the 64-bit version of the plugin</em> and put it in
		the Plug-Ins folder corresponding to 64-bit Photoshop
		(i.e., the one in "Program Files" not "Program Files (x86)").</li>
	</ul>
<li>Move the plugin into the "File Formats" folder
  inside your Photoshop Plugins folder:</li>
  <ul>
  <li>For Windows (32-bit), <b>ICOFormat.8bi</b></li>
  <li>For Windows (64-bit), <b>ICOFormat64.8bi</b></li>
  <li>For Mac OS X, <b>ICOFormat.plugin</b> (note that separate versions are
  	provided for CS2, CS3/4 and CS5)</li>
  <li>For Mac OS X/Classic, <b>icoformat</b></li>
  <li>For 68K MacOS, <b>icoformat(68K)</b></li>
  </ul>
<li>If using Corel PSP Photo X2, put the plugin in
	<tt>C:\Program Files\Corel\Corel Paint Shop Pro Photo X2\Languages\EN\PlugIns</tt></li>
<li>Quit and relaunch Photoshop, if it's already running.</li>
</ol>

<h3>To use the plugin</h3>

<ul>
<li>Use Photoshop's Open command (File menu) to open .ICO and .CUR files (which will now appear
  in the file browser)</li>
<li>Use Photoshop's Save command to create .ICO and .CUR files.</li>
<li>If saving .CUR, note that the cursor hotspot is defined by the
	ruler origin.</li>
</ul>

<h3>Having trouble?</h3>

<ul>
<li>If you are not sure if the plugin is correctly installed, look for "ICO (Windows Icon)"
  under Photoshop's "About Plug-in" menu (on Windows, look under "Help"; on OS&nbsp;X, under "Photoshop").
  If it is not listed:
  <ul>
	<li>check you have downloaded the correct version (Windows/Mac)</li>
	<li>is it in the "File Formats" subdirectory of Photoshop's "Plugins" folder?</li>
	<li>have you quit and re-launched Photoshop?</li>
  </ul></li>
<li>If you are running Vista and see the error "plugin entry point not found",
    try restarting and reinstalling, or see <a href="http://www.adobeforums.com/cgi-bin/webx/.3bc4549f/0">this post</a>.</li>
<li>The plugin is not a Filter or Import/Export plugin, so don't look for it there.
  It appears as a format option when Opening or Saving (eligible images).</li>
<li>The ICO format does not allow images more than 256 pixels high or wide.</li>
<li>Only Bitmap, Grey Scale, Indexed and RGB mode images, no more than 8 bits per channel,
  can be saved as ICO.</li>
<li>Using Windows98? If you see messages about "Assertion Failed", please download this 
  <a href="http://www.telegraphics.com.au/sw/files/ICOFormat-1.6f8-win-cw7.zip">alternative build</a>.
  (Thanks to Qwerky for pointing out this issue.)</li>
</ul>

<h3>Features</h3>

<ul>
<li>Reads and writes .ICO and .CUR files of 1,4,8 bits as Indexed mode
	images, and 16,24,32 bit as RGB mode</li>
<li>If an input file contains multiple icons, a dialog box prompts to select one
(indicates pixel size and colour depth of each contained icon).</li>
<li>Files created by the plugin contain a single icon or cursor only.
	To create "suites" of icons of multiple sizes and/or colour depths,
	you can save them individually and combine with my
	<a href="http://www.telegraphics.com.au/sw/#icobundle">icobundle</a>
	command line utility.</li>
<li>In version 1.7 and later, when saving an icon, it is possible to save in either standard ICO
  or PNG (Vista) compressed formats. The latter format is less compatible with other software
  and in particular should not be used for favicons.</li>
</ul>

<h3>How to add a "favourites" icon (favicon, favicon.ico) to your web site</h3>

<ol>
<li>Create the file named <span class=hl>favicon.ico</span> with your desired graphic
  (as "standard ICO" format, if asked when saving by version 1.7)</li>
<li>Put it at the root level
   of your web site. (If you want Internet Explorer to recognise it, it must be 16x16 pixels in size.)</li>
<li>Put a tag as follows in the <code>&lt;HEAD&gt;...&lt;/HEAD&gt;</code> section of your top-level HTML page (home page):
	<pre>&lt;LINK REL="SHORTCUT ICON" HREF="favicon.ico"&gt;</pre></li>
</ol>

<h3>More references:</h3>

<ul>
<li><a href="http://www.thesitewizard.com/archive/favicon.shtml">What is Favicon.ico and How to Create a Favicon Icon for Your Website</a></li>
<li><a href="http://www.photoshopsupport.com/tutorials/jennifer/favicon.html">Mysteries Of The Favicon.ico - How To Create A Favicon In Photoshop</a></li>
<li><a href="http://www.webdevelopersjournal.com/articles/favicon.html">Creating Your Own Favicon.ico Icon For IE5</a></li>
<li><a href="http://rock13.com/webhelp/favicon.html">Favicon.ico - some brief notes</a></li>
<li><a href="http://www.davesite.com/webstation/html/favicon.shtml">Setting Up a Favorite Icon</a></li>
<li><a href="http://www.w3.org/2005/10/howto-favicon">How to Add a Favicon to your Site</a> (W3C) - technical</li>
<li><a href="http://www.winterdrache.de/freeware/png2ico/favicon.html">How To Create And Install A favicon.ico</a> (for Linux)</li>
<li><a href="http://www.golivein24.com/tips/favicon/">Creating favicons with Adobe Photoshop and GoLive</a></li>
<li><a href="http://www.latext.com/pm/comments/727_0_1_0_C/">Using a favicon with Safari</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/ms537656(VS.85).aspx">How to Add a Shortcut Icon to a Web Page</a> (MSDN) - including troubleshooting information for IE</li>
<li><a href="http://en.wikipedia.org/wiki/Favicon">Wikipedia</a></li>
<li>Microsoft's guidelines for <a href="http://msdn.microsoft.com/en-us/library/ms997636.aspx">XP icons</a></li>
<li>Microsoft's guidelines for <a href="http://msdn.microsoft.com/en-us/library/aa511280.aspx">Vista icons</a></li>
<li><a href="http://www.hicksdesign.co.uk/iconreference/">Hicksdesign's Icon reference</a> page</li>
</ul>
...and <a href="http://www.google.com/search?q=favicon+how">many others</a>.

<h3>About transparency</h3>
<p>
The ICO format has an inherent 1 bit transparency mask (0 = opaque, 1 = transparent), called the AND bitmap.
<ul>
<li>When reading or saving an RGB mode image in Photoshop 6.0 or later, layer transparency is used for the mask</li>
<li>If the image is Indexed mode, and uses a "transparent index", this will be used to set the icon mask</li>
<li>In other cases, the ICO mask is treated as an alpha channel (black = 0 = opaque, white = 255 = transparent)</li>
<li>In PNG (Vista) format icons, the alpha channel is simply stored as part of the PNG. There is no separate mask.</li>
</ul>

<h3>Saving indexed mode images</h3>
<p>
To ensure output files are as compact as possible, the smallest pixel depth is chosen
  sufficient to represent the colours used by the icon:
<ul>
<li>RGB mode: no colour table</li>
<li>Indexed/Grey Scale mode with >16 colours: 8 bits per pixel (up to 256 colours in colour table)</li>
<li>Indexed/Grey Scale mode with >2 colours: 4 bits per pixel (up to 16 colours in colour table)</li>
<li>Bitmap or Indexed/Grey Scale mode with 2 or fewer colours: 1 bit per pixel (up to 2 colours in colour table)</li>
</ul>

<h3>A note on file sizes (Mac only)</h3>
<p>
Do not be alarmed if the Mac Finder shows an unexpectedly large file size for ICO files saved out of Photoshop. 
The ICO itself is stored in the data fork and is as small as possible (see above). 
<p>
The Finder's size calculation is increased by Photoshop's prolific "metadata" in the resource fork,
and does not truly reflect the size of the ICO data. (This is stored for all files saved out of Photoshop,
regardless of format, and whether image thumbnails and previews are enabled in Preferences.) 
Finder's "K" size is also affected by the volume's minimum allocation size (often 4 or 8K depending on partition size).
<p>
On upload to a web site, the data fork alone is copied and the resource fork is stripped, and so this extra data
(and Finder's padded figure) has no effect or relevance whatsoever. The "true" logical size of the ICO file
can be confirmed in OS&nbsp;X's Terminal with <code>ls -l</code> in the icon's directory (or <code>files -x br</code> in MPW&nbsp;Shell).

<h3>About 32-bit <a href="http://msdn.microsoft.com/en-us/library/ms997636.aspx">(Windows XP) icons</a></h3>
<p>
The plugin can create 32-bit icons with 8-bit alpha transparency. This will occur in two cases:
<ol>
<li>in Photoshop 6.0 or later, saving a layered RGB image (i.e. not flattened)</li>
<li>in any version of Photoshop, saving a flat RGB image with 2 or more alpha channels.</li>
</ol>
<p>
In the first case, the layer transparency will be used as the ICO alpha.
The 1-bit "AND mask" is taken from the first alpha channel, or if there is no available alpha channel,
is derived from layer transparency.
<p>
In the second case, the first alpha channel is used to create the 1-bit "AND mask",
and the second alpha channel becomes the 8-bit ICO alpha.
<p>
In both cases, the colour data is set to zero (black) where the icon is transparent. 
This should produce the desired result (complete transparency over the background).

<h3>Still confused, or having trouble?</h3>
<p>
Don't hesitate to <a href="mailto:support@telegraphics.com.au">write to us</a>.

</body>
</html>
